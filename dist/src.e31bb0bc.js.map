{"version":3,"sources":["sketch.js","index.js"],"names":["scale","width","height","p5","video","setSketch","sketch","setup","createCanvas","select","createCapture","VIDEO","size","poseNet","ml5","hide","on","drawPoses","draw","poses","translate","image","drawKeypoints","drawSkeleton","forEach","pose","keypoints","keypoint","score","fill","noStroke","ellipse","position","x","y","skeleton","p1","p2","stroke","line","module","hot","accept","window","location","reload","s2","p5s"],"mappings":"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","file":"src.e31bb0bc.js","sourceRoot":"../src","sourcesContent":["// import \"p5/lib/addons/p5.dom\";\n\nconst scale = 1;\nconst width = 640 * scale;\nconst height = 480 * scale;\n\n// setSketch sets this\nlet p5;\n\n// setup initializes this\nlet video;\n\nexport function setSketch(sketch) {\n  p5 = sketch;\n}\n\nexport function setup() {\n  p5.createCanvas(width, height);\n  video = p5.select('video') || p5.createCapture(p5.VIDEO);\n  video.size(width, height);\n\n  // Create a new poseNet method with a single detection\n  const poseNet = ml5.poseNet(video, () => p5.select('#status').hide());\n\n  // Every time we get a new pose, draw it\n  poseNet.on('pose', drawPoses);\n  \n  // Hide the video element, and just show the canvas\n  video.hide();\n}\n\nexport function draw() {\n}\n\nfunction drawPoses(poses) {\n  p5.translate(width, 0); // move to far corner\n  p5.scale(-1.0, 1.0);\n  p5.image(video, 0, 0, video.width, video.height);\n  drawKeypoints(poses);\n  drawSkeleton(poses);\n}\n\n// Draw ellipses over the detected keypoints\nfunction drawKeypoints(poses) {\n  poses.forEach((pose) =>\n    pose.pose.keypoints.forEach((keypoint) => {\n      if (keypoint.score > 0.2) {\n        p5.fill(0, 255, 255);\n        p5.noStroke();\n        p5.ellipse(keypoint.position.x, keypoint.position.y, 10, 20\n          );\n      }\n    })\n  )\n}\n\nfunction drawSkeleton(poses) {\n    poses.forEach((pose) => {\n      pose.skeleton.forEach((skeleton) => {\n        const [p1, p2] = skeleton;\n        p5.stroke(255, 0, 0);\n        p5.line(p1.position.x, p1.position.y, p2.position.x, p2.position.y);\n      });\n    });\n}\n","// import p5 from 'p5';\nimport * as sketch from './sketch';\n\n// Force page refresh on hot reload\nif (module.hot) {\n    module.hot.accept(() => window.location.reload());\n}\n\nconst s2 = (p5s) => {\n  sketch.setSketch(p5s);\n  p5s.setup = () => sketch.setup(sketch);\n  p5s.draw = () => sketch.draw(sketch);\n}\n\nnew p5(s2, 'container');\n"]}